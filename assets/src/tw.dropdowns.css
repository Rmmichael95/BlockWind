/* ==========================================================
   MODULE: tw.dropdown.css
   Purpose: Navigation dropdown styling for BlockWind / core Navigation block.
            Tailwind v4 utilities only (no Preflight), scoped to .site-nav.
            Desktop: stable hover/focus dropdowns (no “disappear instantly”).
            Mobile overlay: keep WP behavior; only style/layout.
   ========================================================== */

@reference "./tw.reference.css";

/* -------------------------
   Desktop dropdown panels
   ------------------------- */
@media (min-width: 783px) {
  .site-nav
    :is(
      ul.wp-block-navigation__submenu-container,
      ul.wp-block-pages-list__submenu-container
    ) {
    background-color: var(--dh-dropdown-bg);
    border: 1px solid var(--dh-dropdown-border);
    border-radius: var(--dh-dropdown-radius);
    box-shadow: var(--dh-dropdown-shadow);

    padding: var(--wp--preset--spacing--dh-xs);

    position: absolute;
    inset-block-start: calc(100% + var(--wp--preset--spacing--dh-xs));
    inset-inline-start: 0;

    min-inline-size: 15rem;
    z-index: 50;

    display: none;
  }

  /* Show submenu on hover + keyboard focus within */
  .site-nav
    :is(
      li.wp-block-navigation-item.has-child,
      li.wp-block-pages-list__item.has-child
    ):hover
    > :is(
      ul.wp-block-navigation__submenu-container,
      ul.wp-block-pages-list__submenu-container
    ),
  .site-nav
    :is(
      li.wp-block-navigation-item.has-child,
      li.wp-block-pages-list__item.has-child
    ):focus-within
    > :is(
      ul.wp-block-navigation__submenu-container,
      ul.wp-block-pages-list__submenu-container
    ) {
    display: block;
  }

  /* Nested flyouts */
  .site-nav
    :is(
      ul.wp-block-navigation__submenu-container
        ul.wp-block-navigation__submenu-container,
      ul.wp-block-pages-list__submenu-container
        ul.wp-block-pages-list__submenu-container
    ) {
    inset-block-start: 0;
    inset-inline-start: calc(100% + var(--wp--preset--spacing--dh-xs));
  }
}

/* -------------------------
   Mobile submenu panel box
   NOTE: This does NOT define modal alignment or overall menu formatting.
         Offcanvas layout lives in tw.offcanvas.css
   ------------------------- */
@media (max-width: 782px) {
  .site-nav
    .wp-block-navigation__responsive-container
    :is(
      ul.wp-block-navigation__submenu-container,
      ul.wp-block-pages-list__submenu-container
    ) {
    background-color: var(--dh-dropdown-bg);
    border: 1px solid var(--dh-dropdown-border);
    border-radius: var(--dh-dropdown-radius);
    box-shadow: var(--dh-dropdown-shadow);

    padding: var(--wp--preset--spacing--dh-xs);

    position: static;
    inline-size: 100%;
    margin-block-start: var(--wp--preset--spacing--dh-xs);

    display: none;
  }

  /* WP open states */
  .site-nav
    .wp-block-navigation__responsive-container
    :is(
      li.is-open > ul.wp-block-navigation__submenu-container,
      li.is-open > ul.wp-block-pages-list__submenu-container
    ) {
    display: block;
  }

  .site-nav
    .wp-block-navigation__responsive-container
    :is(
      button.wp-block-navigation-submenu__toggle[aria-expanded="true"]
        ~ ul.wp-block-navigation__submenu-container,
      button.wp-block-navigation__submenu-icon[aria-expanded="true"]
        ~ ul.wp-block-navigation__submenu-container,
      button.wp-block-navigation-submenu__toggle[aria-expanded="true"]
        ~ ul.wp-block-pages-list__submenu-container,
      button.wp-block-navigation__submenu-icon[aria-expanded="true"]
        ~ ul.wp-block-pages-list__submenu-container
    ) {
    display: block;
  }
}
