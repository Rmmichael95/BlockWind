/* ==========================================================
   MODULE: tw.offcanvas.css
   Purpose: BlockWind off-canvas navigation overlay styling (FSE Navigation).
            Tailwind v4 utilities only (no Preflight), scoped to .site-nav
            and ONLY while the overlay is open (is-menu-open + has-modal-open).
   ========================================================== */
@reference "./tw.reference.css";

/* ✅ Do NOT style dialog/close/content globally.
   Only style them while the overlay is OPEN. */

:root.has-modal-open
  .site-nav
  .wp-block-navigation__responsive-container.is-menu-open {
  @apply fixed inset-0 z-[100000] p-0;
  background: transparent;
}

/* Backdrop */
:root.has-modal-open
  .site-nav
  .wp-block-navigation__responsive-container.is-menu-open::before {
  content: "";
  position: absolute;
  inset: 0;
  background: rgb(0 0 0 / 0.5);
}

/* Drawer panel (ONLY change: width behavior) */
:root.has-modal-open .site-nav .wp-block-navigation__responsive-dialog {
  @apply absolute top-0 right-0 h-full;
  @apply shadow-2xl;
  background-color: var(--bw-color-bg);
  color: var(--bw-color-text);
  font-family: var(--bw-font-body);

  /* Mobile-first: full width */
  width: 100%;
  height: 100%;

  /* Cap at 448px once viewport is 448px+ */
  max-width: min(var(--bw-offcanvas-max-width), 100vw);

  box-sizing: border-box;
}

/* Scroll area (leave room for logo + close “row”) */
:root.has-modal-open
  .site-nav
  .wp-block-navigation__responsive-container-content {
  @apply h-full overflow-y-auto p-6 pt-16;
}

/* Close button */
:root.has-modal-open
  .site-nav
  .wp-block-navigation__responsive-container-close {
  @apply absolute top-4 right-4 z-20 inline-flex items-center justify-center;
  @apply p-2 rounded-md bg-white/95 shadow ring-1 ring-black/10;
}

/* Logo: top-left, same edge spacing as the close “X”, sized safely */
:root.has-modal-open .site-nav .offcanvas-site-logo {
  @apply absolute top-4 left-4 z-10 flex items-center;
  /* reserve space so the logo never runs under the close button */
  padding-right: 3.5rem;
  max-width: calc(100% - 3.5rem);
}

:root.has-modal-open .site-nav .offcanvas-site-logo img,
:root.has-modal-open .site-nav .offcanvas-site-logo svg {
  @apply block w-auto max-w-full object-contain;
  /* responsive + safe for huge uploads */
  height: clamp(2.25rem, 7vw, 3.5rem);
}
