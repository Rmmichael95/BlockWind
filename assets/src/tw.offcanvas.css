/* ==========================================================
   MODULE: tw.offcanvas.css
   Purpose: BlockWind off-canvas navigation overlay styling (FSE Navigation).
            Tailwind v4 utilities only (no Preflight), scoped to .site-nav
            and ONLY while the overlay is open (is-menu-open + has-modal-open).
   ========================================================== */

@reference "./tw.reference.css";

/* Only apply while modal is open */
:root.has-modal-open
  .site-nav
  .wp-block-navigation__responsive-container.is-menu-open {
  position: fixed;
  inset: 0;
  z-index: 100000;

  /* Flex layout allows modal alignment independent of desktop */
  display: flex;
  justify-content: flex-end; /* change to center or flex-start if desired */
  align-items: stretch;
}

/* Backdrop */
:root.has-modal-open
  .site-nav
  .wp-block-navigation__responsive-container.is-menu-open::before {
  content: "";
  position: absolute;
  inset: 0;
  background: color-mix(in oklab, var(--bw-black) 50%, transparent);
}

/* Drawer panel */
:root.has-modal-open .site-nav .wp-block-navigation__responsive-dialog {
  position: relative;
  z-index: 1;

  block-size: 100%;
  inline-size: min(100%, var(--bw-offcanvas-max-width));

  background-color: var(--bw-offcanvas-bg);
  border-inline-start: 1px solid var(--bw-offcanvas-border);
  border-top-left-radius: var(--bw-offcanvas-radius);
  border-bottom-left-radius: var(--bw-offcanvas-radius);
  box-shadow: var(--bw-offcanvas-shadow);

  padding: var(--wp--preset--spacing--bw-md);
  box-sizing: border-box;
  overflow: hidden;
}

/* Scroll area */
:root.has-modal-open
  .site-nav
  .wp-block-navigation__responsive-container-content {
  block-size: 100%;
  overflow-y: auto;

  /* Space for close button row */
  padding-block-start: calc(
    var(--wp--preset--spacing--bw-md) + var(--wp--preset--spacing--bw-sm)
  );
}

/* Modal-specific menu formatting (independent of desktop) */
:root.has-modal-open .site-nav .wp-block-navigation__container {
  display: flex;
  flex-direction: column;
  gap: var(--wp--style--block-gap, var(--wp--preset--spacing--bw-xs));
  align-items: stretch;
}

/* Example: modal text alignment independent of desktop */
:root.has-modal-open
  .site-nav
  .wp-block-navigation__container
  :is(a.wp-block-navigation-item__content, a.wp-block-pages-list__item__link) {
  text-align: right;
}

/* Close button container (do not override focus outline) */
:root.has-modal-open
  .site-nav
  .wp-block-navigation__responsive-container-close {
  position: absolute;
  inset-block-start: var(--wp--preset--spacing--bw-sm);
  inset-inline-end: var(--wp--preset--spacing--bw-sm);

  inline-size: 2.5rem;
  block-size: 2.5rem;

  display: inline-flex;
  align-items: center;
  justify-content: center;

  border-radius: var(--wp--preset--radius--bw-md);
  border: 1px solid var(--bw-offcanvas-border);
  background-color: var(--bw-surface);
}
